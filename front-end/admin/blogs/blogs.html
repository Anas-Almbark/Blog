<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Admin</title>
    <link
      rel="stylesheet"
      href="../../vendors/typicons.font/font/typicons.css"
    />
    <link rel="stylesheet" href="../../vendors/css/vendor.bundle.base.css" />
    <link rel="stylesheet" href="../../css/vertical-layout-light/style.css" />
    <link rel="shortcut icon" href="images/favicon.png" />
    <link rel="stylesheet" href="../../css/vertical-layout-light/blogs.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    />
  </head>
  <body>
    <div class="row" id="proBanner"></div>
    <div class="container-scroller">
      <!-- partial:partials/_navbar.html -->
      <nav class="navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row">
        <div
          class="text-center navbar-brand-wrapper d-flex align-items-center justify-content-center"
        >
          <a class="navbar-brand brand-logo" href="index.html"> MAIOH </a>
          <a class="navbar-brand brand-logo-mini" href="index.html"
            ><img src="images/logo-mini.svg" alt="logo"
          /></a>
          <button
            class="navbar-toggler navbar-toggler align-self-center d-none d-lg-flex"
            type="button"
            data-toggle="minimize"
          >
            <span class="typcn typcn-th-menu"></span>
          </button>
        </div>
        <div
          class="navbar-menu-wrapper d-flex align-items-center justify-content-end"
        >
          <ul class="navbar-nav navbar-nav-right">
            <li class="nav-item d-none d-lg-flex mr-2">
              <a class="nav-link" href="#"> Help </a>
            </li>
            <li class="nav-item dropdown d-flex">
              <a
                class="nav-link count-indicator dropdown-toggle d-flex justify-content-center align-items-center"
                id="messageDropdown"
                href="#"
                data-toggle="dropdown"
              >
                <i class="typcn typcn-message-typing"></i>
                <span class="count bg-success">2</span>
              </a>
              <div
                class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
                aria-labelledby="messageDropdown"
              >
                <p class="mb-0 font-weight-normal float-left dropdown-header">
                  Messages
                </p>
                <a class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <img
                      src="images/faces/face4.jpg"
                      alt="image"
                      class="profile-pic"
                    />
                  </div>
                  <div class="preview-item-content flex-grow">
                    <h6 class="preview-subject ellipsis font-weight-normal">
                      David Grey
                    </h6>
                    <p class="font-weight-light small-text mb-0">
                      The meeting is cancelled
                    </p>
                  </div>
                </a>
                <a class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <img
                      src="images/faces/face2.jpg"
                      alt="image"
                      class="profile-pic"
                    />
                  </div>
                  <div class="preview-item-content flex-grow">
                    <h6 class="preview-subject ellipsis font-weight-normal">
                      Tim Cook
                    </h6>
                    <p class="font-weight-light small-text mb-0">
                      New product launch
                    </p>
                  </div>
                </a>
                <a class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <img
                      src="images/faces/face3.jpg"
                      alt="image"
                      class="profile-pic"
                    />
                  </div>
                  <div class="preview-item-content flex-grow">
                    <h6 class="preview-subject ellipsis font-weight-normal">
                      Johnson
                    </h6>
                    <p class="font-weight-light small-text mb-0">
                      Upcoming board meeting
                    </p>
                  </div>
                </a>
              </div>
            </li>
            <li class="nav-item dropdown d-flex">
              <a
                class="nav-link count-indicator dropdown-toggle d-flex align-items-center justify-content-center"
                id="notificationDropdown"
                href="#"
                data-toggle="dropdown"
              >
                <i class="typcn typcn-bell mr-0"></i>
                <span class="count bg-danger">2</span>
              </a>
              <div
                class="dropdown-menu dropdown-menu-right navbar-dropdown preview-list"
                aria-labelledby="notificationDropdown"
              >
                <p class="mb-0 font-weight-normal float-left dropdown-header">
                  Notifications
                </p>
                <a class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <div class="preview-icon bg-success">
                      <i class="typcn typcn-info-large mx-0"></i>
                    </div>
                  </div>
                  <div class="preview-item-content">
                    <h6 class="preview-subject font-weight-normal">
                      Application Error
                    </h6>
                    <p class="font-weight-light small-text mb-0">Just now</p>
                  </div>
                </a>
                <a class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <div class="preview-icon bg-warning">
                      <i class="typcn typcn-cog mx-0"></i>
                    </div>
                  </div>
                  <div class="preview-item-content">
                    <h6 class="preview-subject font-weight-normal">Settings</h6>
                    <p class="font-weight-light small-text mb-0">
                      Private message
                    </p>
                  </div>
                </a>
                <a class="dropdown-item preview-item">
                  <div class="preview-thumbnail">
                    <div class="preview-icon bg-info">
                      <i class="typcn typcn-user-outline mx-0"></i>
                    </div>
                  </div>
                  <div class="preview-item-content">
                    <h6 class="preview-subject font-weight-normal">
                      New user registration
                    </h6>
                    <p class="font-weight-light small-text mb-0">2 days ago</p>
                  </div>
                </a>
              </div>
            </li>
            <li class="nav-item nav-profile dropdown">
              <a
                class="nav-link dropdown-toggle pl-0 pr-0"
                href="#"
                data-toggle="dropdown"
                id="profileDropdown"
              >
                <i class="typcn typcn-user-outline mr-0"></i>
                <span class="nav-profile-name">Evan Morales</span>
              </a>
              <div
                class="dropdown-menu dropdown-menu-right navbar-dropdown"
                aria-labelledby="profileDropdown"
              >
                <a class="dropdown-item">
                  <i class="typcn typcn-cog text-primary"></i>
                  Settings
                </a>
                <a class="dropdown-item">
                  <i class="typcn typcn-power text-primary"></i>
                  Logout
                </a>
              </div>
            </li>
          </ul>
          <button
            class="navbar-toggler navbar-toggler-right d-lg-none align-self-center"
            type="button"
            data-toggle="offcanvas"
          >
            <span class="typcn typcn-th-menu"></span>
          </button>
        </div>
      </nav>
      <!-- partial -->
      <div class="container-fluid page-body-wrapper">
        <!-- partial:partials/_settings-panel.html -->
        <div class="theme-setting-wrapper">
          <div id="settings-trigger">
            <i class="typcn typcn-cog-outline"></i>
          </div>
          <div id="theme-settings" class="settings-panel">
            <i class="settings-close typcn typcn-delete-outline"></i>
            <p class="settings-heading">SIDEBAR SKINS</p>
            <div class="sidebar-bg-options" id="sidebar-light-theme">
              <div class="img-ss rounded-circle bg-light border mr-3"></div>
              Light
            </div>
            <div class="sidebar-bg-options selected" id="sidebar-dark-theme">
              <div class="img-ss rounded-circle bg-dark border mr-3"></div>
              Dark
            </div>
            <p class="settings-heading mt-2">HEADER SKINS</p>
            <div class="color-tiles mx-0 px-4">
              <div class="tiles success"></div>
              <div class="tiles warning"></div>
              <div class="tiles danger"></div>
              <div class="tiles primary"></div>
              <div class="tiles info"></div>
              <div class="tiles dark"></div>
              <div class="tiles default border"></div>
            </div>
          </div>
        </div>
        <!-- partial -->
        <!-- partial:partials/_sidebar.html -->
        <nav class="sidebar sidebar-offcanvas" id="sidebar">
          <ul class="nav">
            <li class="nav-item">
              <div class="d-flex sidebar-profile">
                <div class="sidebar-profile-image">
                  <img src="images/faces/face29.png" alt="image" />
                  <span class="sidebar-status-indicator"></span>
                </div>
                <div class="sidebar-profile-name">
                  <p class="sidebar-name">Kenneth Osborne</p>
                  <p class="sidebar-designation">Welcome</p>
                </div>
              </div>
              <div class="nav-search">
                <div class="input-group">
                  <input
                    type="text"
                    class="form-control"
                    placeholder="Type to search..."
                    aria-label="search"
                    aria-describedby="search"
                  />
                  <div class="input-group-append">
                    <span class="input-group-text" id="search">
                      <i class="typcn typcn-zoom"></i>
                    </span>
                  </div>
                </div>
              </div>
              <p class="sidebar-menu-title">Dash menu</p>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../index.html">
                <i class="typcn typcn-device-desktop menu-icon"></i>
                <span class="menu-title">Dashboard</span>
              </a>
            </li>
            <li class="nav-item">
              <form
                action="http://localhost/Blog/back-end/blog.php"
                method="get"
              >
                <a class="nav-link" href="./blogs.html?getBlogs=true">
                  <i class="typcn typcn-chart-area-outline menu-icon"></i>
                  <span class="menu-title"> Blogs </span>
                </a>
              </form>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../categories/categories.html">
                <i class="typcn typcn-chart-bar menu-icon"></i>
                <span class="menu-title"> Categories</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../admin.html">
                <i class="typcn typcn-chart-bar menu-icon"></i>
                <span class="menu-title"> add admin</span>
              </a>
            </li>
          </ul>
        </nav>
        <div class="main-panel" style="background-color: #e8eff9">
          <div class="info-bar my-5 mx-5 text-right">
            <a href="./addBlogs.html">
              <button type="button" class="btn btn-success">add blog</button>
            </a>
          </div>
          <div class="content-wrapper">
            <div class="container">
              <div class="row" id="box-blogs">
                <!-- Blogs will be loaded here -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script src="../../vendors/js/vendor.bundle.base.js"></script>
    <script src="../js/off-canvas.js"></script>
    <script src="../js/hoverable-collapse.js"></script>
    <script src="../js/template.js"></script>
    <script src="../js/settings.js"></script>
    <script src="../js/todolist.js"></script>
    <script src="../../vendors/progressbar.js/progressbar.min.js"></script>
    <script src="../../vendors/chart.js/Chart.min.js"></script>
    <script src="../js/dashboard.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        fetch("http://localhost/Blog/back-end/blog.php?getBlogs=true")
          .then((response) => response.json())
          .then((data) => {
            const container = document.getElementById("box-blogs");
            data.forEach((blog, i) => {
              const card = document.createElement("div");
              card.className = "col-md-4 mb-4";
              const contentPreview =
                blog.content.length > 50
                  ? blog.content.substring(0, 50) + "..."
                  : blog.content;
              card.innerHTML = `
                          <div class="card h-100">
                              <div class="card-body d-flex flex-column">
                                  <div class="d-flex align-items-center mb-3">
                                      <img src="../../${
                                        blog.img
                                          ? blog.img
                                          : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAhFBMVEXx8e9WV1lTVFZLS0zi4uLz9O+PkJL49/ZMTE+WmJft7evt7e1PUFNQUFHa2tj6+vhnaGvOzs5VV1dXWVhlZWXFxcVbW11ISEnf399QUlGTk5JhYmOsrKxxcXOJi4qfn5/Gx8e5ublpbGmBgoJ6enq2t7Rub3HS1NV0dHLLysy6u71LTkz9a0/cAAAEhUlEQVR4nO3bi26iQBQGYM4APYiMtNwUoV6q1u76/u+3Z7RdL1g1TYkj+b9kE1fQ9O+UOWdGcRwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAuCO/BffOtMeDdvC9g33il8x13aAF2YsdGddlQmoviqJfeaAUkV7fO5wRLxU999qQUbK0YhAjSrgNMcsg9u+dToQRPcetvHP8bE3CrPMJuz+GSHjV+e6lEwn7Jhx7s3nuNetCJxIK35uosiz1wjs90omEMoKDVJF0MqSS9ckwdiRhvySicd0rVJqejGInEjo8jZI3TzoY741U73gQO5Gw36+oHGwfejpJjg92IqHjRfSxqxXxkobHf6bdSDjSarF7NU9oODo61o2EoaJs9yiuyH2wMeR1o8KdOWlJujYvj1fBaQdve0LO9fv1V3M+pGgaOmFdUvD3oeZSrl0qF9e3y/gpoDKtkjINFo9T8SVXfxKkskQfX9+F4N7GbMkod3x6xOKE0ku/RzKC6vMau4xfJm9VNmnuq1mckNeFouEqroPCzW/YS4qd0Dlzmr0J+W9AKpUxiceaNj/f87Q2IU8D0h+79d4iomLw03e2NuFCk144ZnUr/94VFeEP39nKhL7vZSW50/9/mWFB6vXqj/lAuxj8kiaJPpxdBoWM6M8uRRsTxitNqjhaq/svrpTFyzWD17NzJ1iYkHsyx7z2j0dM+rIiqC+NorQ/w3NFxbqEft/MMZPGCVzrRst5eNhbRkTlvDmKtiVkr1LkmsE6nTf8XlDo78pinJOiSKWble09DedmJGZnc7CUxWjUnDF93w+f3CRJc2kNhnP2dyXmi0UJZV3HsvpR2befS0tZzLxmTeB1JgP44fk80bvxP2RVQh678pN+X9q9itRH41mug2QXrG/eIKjtXQE7r7J+vbhSGlGjLMoUI7+WasDbFGYePugUDJsSPiu6XBCkFZCF7tF+aJwn8qpx6H9eezyVmfgooj0JZalL0Z+LAf3tgmOz/y34znhDKsp5/62Z2HTsh72BPQkp1dmZj45OmG0NV8riNpGsICPaLI9fxfUmjZ7MU7tcFiVUi1uWD9zTRbDr6EwTIFPMaf2I600S7VsGixJWt+2XsvQ8NJI/2HApl1x1+lGTs40oXdHX8xYlvPmbCh+KqjDOtdSIxr7TVjwfFnr59R97Et685+1lUhZ7sv5I599ctzyXowvrrsNbE/rOSFo76WKW3rdfPOT5kKLX7cMHTGjKolyK+vJaauZ+bgs8ZEIpi8PszBRzdEouLe57+KgJJWL/Wuk0A62yh014buu3ccpaamzlPWrCW/AgTVQWvnc3oeMPFKnnDo+h8AolDX3Z4YTOqFId/wYte1XHx1DWUB0fw8eth7ezJ2HyFrdyB489Cc36sJWEFemffvb4m8xdEauR14JVRKkNd5RwHZB226C3m3M23ME2cctStWFjdqVsSOjMnsbjp983Np/zWHIXYiv3PbEN1yAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdNU/a9tcIP2YuKgAAAAASUVORK5CYII="
                                      }" class="img-thumbnail" style="width: 50px; height: 50px;" alt="img">
                                      <h5 class="card-title mt-4 ml-3">${
                                        blog.title
                                      }</h5>
                                  </div>
                                  <p class="card-text flex-grow-1">${contentPreview}</p>
                                  <span class="badge-info p-2 px-3 my-3" style="width:fit-content">${
                                    blog.category_name
                                  }</span>
                                  <p class="card-text">
                                      <small class="text-muted">${
                                        blog.created_at
                                      }</small>
                                  </p>
                                  <div class="mt-2 d-flex align-items-center actions">
                                      <form action="" method="post">
                                          <button class="btn text-warning">
                                              <i class="fa-solid fa-pen-to-square"></i>
                                          </button>
                                      </form>
                                      <form action="http://localhost/Blog/back-end/blog.php" method="post">
                                          <button type='submit' name='deleteBlog' value=${
                                            blog.id
                                          } class="btn text-danger">
                                              <i class="fa-solid fa-trash"></i>
                                          </button>
                                      </form>
                                  </div>
                              </div>
                          </div>`;
              container.appendChild(card);
            });
          })
          .catch((error) => console.error("Error fetching categories:", error));
      });
    </script>
  </body>
</html>
